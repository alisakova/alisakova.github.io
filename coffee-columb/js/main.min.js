var accordion = document.querySelectorAll('.accordion');

for (var i = 0; i < accordion.length; i++) {
  accordion[i].addEventListener('click', function() {
    this.classList.toggle('active');
    var panel = this.nextElementSibling; //ищет последующий элемент после текущего
    if (panel.style.maxHeight) {
      panel.style.maxHeight = null;
    } else {
      panel.style.maxHeight = panel.scrollHeight + 'px';
    }
  });
}

$(document).ready(function(){
  if ($('.reviews-slider').length) {
    $('.reviews-slider').slick({
      infinite: true,
      arrows: false,
      autoplay: true,
      speed: 500,
      centerPadding: '382px',
      centerMode: true,
      responsive: [
        {
          breakpoint: 1330,
          settings: {
            centerPadding: '250px'
          }
        },
        {
          breakpoint: 992,
          settings: {
            centerPadding: '150px'
          }
        },
        {
          breakpoint: 768,
          settings: {
            centerPadding: '100px'
          }
        },
        {
          breakpoint: 660,
          settings: {
            centerMode: false,
            centerPadding: '20px'
          }
        }
      ]
    });
  }
  if ($('.news-slider').length) {
    $('.news-slider').slick();
  }
});

// $(window).on('resize orientationchange', function() {
//   $('.reviews-slider').slick('reinit');
// });

if ($('.reviews-slider').length) {
  $(window).resize(function() {
    $('.reviews-slider').slick('resize');
  });
}

// для плавного появления модалок

$("a._call-btn").on("click", function(event) {
  $(this).modal({
    fadeDuration: 250,
    fadeDelay: null
  });
  return false;
});

var toTopBtn = document.querySelector(".btn-up");
var scrollAnimation;

if (toTopBtn) {
  window.onscroll = function() {
    scrollFunction();
  };

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      toTopBtn.classList.add("active");
    } else {
      toTopBtn.classList.remove("active");
    }
  }

  function scrollToTop() {
    var position = document.body.scrollTop || document.documentElement.scrollTop;
    if (position) {
      window.scrollBy(0, -Math.max(10, Math.floor(position / 10)));
      scrollAnimation = setTimeout("scrollToTop()", 10);
    } else clearTimeout(scrollAnimation);
  }
}

// var myMap;
//
// ymaps.ready(init);
//
// function init() {
//   // Создание экземпляра карты и его привязка к контейнеру с
//   // заданным id ("map").
//   myMap = new ymaps.Map(
//     "map",
//     {
//       // При инициализации карты обязательно нужно указать
//       // её центр и коэффициент масштабирования.
//       center: [59.903646, 30.299408],
//       zoom: 17
//     },
//     {
//       searchControlProvider: "yandex#search"
//     }
//   );
//   myPlacemark = new ymaps.Placemark([59.903670, 30.300669]);
//   myMap.geoObjects.add(myPlacemark);
//   myMap.container.fitToViewport(true);
// }
//
// window.addEventListener("resize", function() {
//   myMap.container.fitToViewport(true);
// });

const $input = $('input[type=range]');
const $output = $('#output');


$(document).ready(function() {
  if ($input.length) {
    function updateOutput(value) {
      $output[0].textContent = value;
    }

    $input.on('input', function(e) {
      updateOutput(e.target.value);
    });

    $input.rangeslider({
      polyfill: false
    });

    updateOutput($input[0].value);
  }
});
