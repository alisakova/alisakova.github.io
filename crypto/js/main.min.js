var accordion = document.querySelectorAll(".accordion");

for (var i = 0; i < accordion.length; i++) {
  accordion[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.maxHeight) {
      panel.style.maxHeight = null;
    } else {
      panel.style.maxHeight = panel.scrollHeight + "px";
    }
  });
}

$(".form__input").focus(function() {
  $(this)
    .parents(".form__item")
    .addClass("focused");
});

$("input").blur(function() {
  var inputValue = $(this).val();
  if (inputValue == "") {
    $(this).removeClass("filled");
    $(this)
      .parents(".form__item")
      .removeClass("focused");
  } else {
    $(this).addClass("filled");
  }
});

$(window).on("scroll", function() {
  if ($(window).scrollTop() > 1600) {
    $(".header").addClass("active");
  } else {
    $(".header").removeClass("active");
  }
});

$('document').ready(function() {
  var listedBtn = document.querySelector("._listed");
  var form = document.querySelector(".form-container");
  var body = document.querySelector("body");

  var dropdownToggle = document.querySelectorAll(".dropdown__toggle");
  var dropdowns = document.querySelectorAll(".dropdown");

  if (window.innerWidth < 900)  {
    dropdownToggle.forEach(function(item) {
      item.addEventListener("click", function(e) {
        var dropdown = e.target.closest(".dropdown");
        e.stopPropagation();
        dropdowns.forEach(function(item) {
          if (item !== dropdown) {
            item.classList.remove("active");
          }
        });
        if (form.classList.contains("active")) {
          form.classList.remove("active");
        }
        dropdown.classList.toggle("active");
      });
    });

    body.addEventListener("click", function(e) {
      e.stopPropagation();
      dropdowns.forEach(function(item) {
        if (item.classList.contains("active")) {
          item.classList.remove("active");
        }
      });
    });
    listedBtn.addEventListener("click", function(e) {
      e.stopPropagation();
      listedBtn.classList.toggle("active");
      form.classList.toggle("active");
      dropdowns.forEach(function(item) {
        if (item.classList.contains("active")) {
          item.classList.remove("active");
        }
      });
    });
  }
});

function openTab(evt, name) {
  var i, tabcontent, tablinks;

  tabcontent = document.getElementsByClassName("tabs__content");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  tablinks = document.getElementsByClassName("tabs__tab");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  document.getElementById(name).style.display = "block";
  evt.currentTarget.className += " active";
}

var defaultClick = document.querySelector("._default");

if (defaultClick) {
  defaultClick.click();
}
